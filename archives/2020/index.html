<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>Archives: 2020 | Moose</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Moose">
<meta property="og:url" content="http://yoursite.com/archives/2020/index.html">
<meta property="og:site_name" content="Moose">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Moose">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Moose" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 4.2.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="header-outer" class="outer">
  <canvas id="canvas" width="1521" height="258"></canvas>
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Moose</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
  
    
    
      
      
      <section class="archives-wrap">
        <div class="archive-year-wrap">
          <a href="/archives/2020" class="archive-year">2020</a>
        </div>
        <div class="archives">
    
    <article class="archive-article archive-type-post">
  <div class="archive-article-inner">
    <header class="archive-article-header">
      <a href="/2020/01/01/hello-world/" class="archive-article-date">
  <time datetime="2020-01-01T05:20:44.599Z" itemprop="datePublished">Jan 1</time>
</a>
      
  
    <h1 itemprop="name">
      <a class="archive-article-title" href="/2020/01/01/hello-world/">Hello World</a>
    </h1>
  

    </header>
  </div>
</article>
  
  
    </div></section>
  


</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/01/01/hello-world/">Hello World</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 Moose<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
<script>

  var canvas = document.getElementById("canvas");
  
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
  
  // Initialize the GL context
  var gl = canvas.getContext('webgl');
  if(!gl){
    console.error("Unable to initialize WebGL.");
  }
  
  //Time step
  var dt = 0.015;
  //Time
  var time = 0.0;
  
  //************** Shader sources **************
  
  var vertexSource = `
  attribute vec2 position;
  void main() {
      gl_Position = vec4(position, 0.0, 1.0);
  }
  `;
  
  var fragmentSource = `
  precision highp float;
  
  uniform float width;
  uniform float height;
  vec2 resolution = vec2(width, height);
  
  uniform float time;
  
  //Base values modified with depth later
  float intensity = 1.0;
  float radius = 0.05;
  
  //Distance functions from 
  //https://www.iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm
  float triangleDist(vec2 p){ 
      const float k = sqrt(3.0);
    p.x = abs(p.x) - 1.0;
    p.y = p.y + 1.0/k;
    if( p.x+k*p.y>0.0 ) p=vec2(p.x-k*p.y,-k*p.x-p.y)/2.0;
    p.x -= clamp( p.x, -2.0, 0.0 );
    return -length(p)*sign(p.y);
  }
  
  float boxDist(vec2 p){
    vec2 d = abs(p)-1.0;
    return length(max(d,vec2(0))) + min(max(d.x,d.y),0.0);
  }
  
  float circleDist( vec2 p){
    return length(p) - 1.0;
  }
  
  //https://www.shadertoy.com/view/3s3GDn
  float getGlow(float dist, float radius, float intensity){
    return pow(radius/dist, intensity);
  }
  
  void main(){
      
      vec2 uv = gl_FragCoord.xy/resolution.xy;
    float widthHeightRatio = resolution.x/resolution.y;
    vec2 centre;
    vec2 pos;
      
    float t = time * 0.05;
      
    float dist;
    float glow;
    vec3 col = vec3(0);
      
    //The spacing between shapes
    float scale = 500.0;
    //Number of shapes
    const float layers = 15.0;
      
    float depth;
    vec2 bend;
      
    vec3 purple = vec3(0.611, 0.129, 0.909);
    vec3 green = vec3(0.133, 0.62, 0.698);
      
    float angle;
    float rotationAngle;
    mat2 rotation;
      
    //For movement of the anchor point in time
    float d = 2.5*(sin(t) + sin(3.0*t));
  
    //Create an out of frame anchor point where all shapes converge to    
    vec2 anchor = vec2(0.5 + cos(d), 0.5 + sin(d));
      
    //Create light purple glow at the anchor loaction
    pos = anchor - uv;
    pos.y /= widthHeightRatio;
    dist = length(pos);
    glow = getGlow(dist, 0.2, 1.9);
    col += glow * vec3(0.7,0.6,1.0);
      
      for(float i = 0.0; i < layers; i++){
          
      //Time varying depth information depending on layer
      depth = fract(i/layers + t);
  
      //Move the focus of the camera in a circle
      centre = vec2(0.5 + 0.2 * sin(t), 0.5 + 0.2 * cos(t));
          
      //Position shapes between the anchor and the camera focus based on depth
      bend = mix(anchor, centre, depth);
          
      pos = bend - uv;
      pos.y /= widthHeightRatio;
  
      //Rotate shapes
      rotationAngle = 3.14 * sin(depth + fract(t) * 6.28) + i;
      rotation = mat2(cos(rotationAngle), -sin(rotationAngle), 
                      sin(rotationAngle),  cos(rotationAngle));
          
      pos *= rotation;
          
      //Position shapes according to depth
      pos *= mix(scale, 0.0, depth);
          
      float m = mod(i, 3.0);
      if(m == 0.0){
          dist = abs(boxDist(pos));
      }else if(m == 1.0){
        dist = abs(triangleDist(pos));
      }else{
          dist = abs(circleDist(pos));
      }
         
      //Get glow from base radius and intensity modified by depth
      glow = getGlow(dist, radius+(1.0-depth)*2.0, intensity + depth);
          
      //Find angle along shape and map from [-PI; PI] to [0; 1]
      angle = (atan(pos.y, pos.x)+3.14)/6.28;
      //Shift angle depending on layer and map to [1...0...1]
          angle = abs((2.0*fract(angle + i/layers)) - 1.0);
          
      //White core
      //col += 10.0*vec3(smoothstep(0.03, 0.02, dist));
          
      //Glow according to angle value
      col += glow * mix(green, purple, angle);
      }
      
    //Tone mapping
    col = 1.0 - exp(-col);
      
    //Output to screen
    gl_FragColor = vec4(col,1.0);
  }
  `;
  
  //************** Utility functions **************
  
  window.addEventListener('resize', onWindowResize, false);
  
  function onWindowResize(){
    canvas.width  = window.innerWidth;
    canvas.height = window.innerHeight;
      gl.viewport(0, 0, canvas.width, canvas.height);
    gl.uniform1f(widthHandle, window.innerWidth);
    gl.uniform1f(heightHandle, window.innerHeight);
  }
  
  
  //Compile shader and combine with source
  function compileShader(shaderSource, shaderType){
    var shader = gl.createShader(shaderType);
    gl.shaderSource(shader, shaderSource);
    gl.compileShader(shader);
    if(!gl.getShaderParameter(shader, gl.COMPILE_STATUS)){
      throw "Shader compile failed with: " + gl.getShaderInfoLog(shader);
    }
    return shader;
  }
  
  //From https://codepen.io/jlfwong/pen/GqmroZ
  //Utility to complain loudly if we fail to find the attribute/uniform
  function getAttribLocation(program, name) {
    var attributeLocation = gl.getAttribLocation(program, name);
    if (attributeLocation === -1) {
      throw 'Cannot find attribute ' + name + '.';
    }
    return attributeLocation;
  }
  
  function getUniformLocation(program, name) {
    var attributeLocation = gl.getUniformLocation(program, name);
    if (attributeLocation === -1) {
      throw 'Cannot find uniform ' + name + '.';
    }
    return attributeLocation;
  }
  
  //************** Create shaders **************
  
  //Create vertex and fragment shaders
  var vertexShader = compileShader(vertexSource, gl.VERTEX_SHADER);
  var fragmentShader = compileShader(fragmentSource, gl.FRAGMENT_SHADER);
  
  //Create shader programs
  var program = gl.createProgram();
  gl.attachShader(program, vertexShader);
  gl.attachShader(program, fragmentShader);
  gl.linkProgram(program);
  
  gl.useProgram(program);
  
  //Set up rectangle covering entire canvas 
  var vertexData = new Float32Array([
    -1.0,  1.0,   // top left
    -1.0, -1.0,   // bottom left
     1.0,  1.0,   // top right
     1.0, -1.0,   // bottom right
  ]);
  
  //Create vertex buffer
  var vertexDataBuffer = gl.createBuffer();
  gl.bindBuffer(gl.ARRAY_BUFFER, vertexDataBuffer);
  gl.bufferData(gl.ARRAY_BUFFER, vertexData, gl.STATIC_DRAW);
  
  // Layout of our data in the vertex buffer
  var positionHandle = getAttribLocation(program, 'position');
  
  gl.enableVertexAttribArray(positionHandle);
  gl.vertexAttribPointer(positionHandle,
    2,                // position is a vec2 (2 values per component)
    gl.FLOAT, // each component is a float
    false,        // don't normalize values
    2 * 4,        // two 4 byte float components per vertex (32 bit float is 4 bytes)
    0                 // how many bytes inside the buffer to start from
    );
  
  //Set uniform handle
  var timeHandle = getUniformLocation(program, 'time');
  var widthHandle = getUniformLocation(program, 'width');
  var heightHandle = getUniformLocation(program, 'height');
  
  gl.uniform1f(widthHandle, window.innerWidth);
  gl.uniform1f(heightHandle, window.innerHeight);
  
  function draw(){
    //Update time
    time += dt;
  
      //Send uniforms to program
    gl.uniform1f(timeHandle, time);
    //Draw a triangle strip connecting vertices 0-4
    gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);
  
    requestAnimationFrame(draw);
  }
  
  draw();
  
  </script>
</html>